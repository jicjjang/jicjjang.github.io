{"componentChunkName":"component---src-templates-post-template-tsx","path":"/posts/jwt","result":{"data":{"site":{"siteMetadata":{"title":"June"}},"markdownRemark":{"id":"8b784e91-d2be-5c78-93c7-80677db044d7","excerpt":"회사에서 서버 개발을 하면서 Session과 Cache이 복잡하게 얽혀있고, 분리된 여러 서버를 넘나들며\n사용하기 힘들다는 생각을 하게되었습니다. 특히, 인증 부분에 있어서 맡아서 하는 부분이 없다보니\n개발을 해볼 수 있는 환경이 아니었습니다. 그래서 우연히 알게 된 jwt…","html":"<p>회사에서 서버 개발을 하면서 Session과 Cache이 복잡하게 얽혀있고, 분리된 여러 서버를 넘나들며\n사용하기 힘들다는 생각을 하게되었습니다. 특히, 인증 부분에 있어서 맡아서 하는 부분이 없다보니\n개발을 해볼 수 있는 환경이 아니었습니다. 그래서 우연히 알게 된 jwt에 대해 공부를 해보았습니다.</p>\n<hr>\n<h1 id=\"1-basic\" style=\"position:relative;\">1. basic<a href=\"#1-basic\" aria-label=\"1 basic permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>JSON Web Token (JWT)는 디지털 서명을 통해 확인하고 신뢰할 수있는 정보를 보내는 데 사용됩니다.\n가장 기본적인 형태의 JWT를 사용하면 서명으로 데이터 (Claim)에 서명 할 수 있으며 나중에\n비밀 서명 키로 확인할 수 있습니다.</p>\n<p>JWT는 base64url로 인코딩 된 값 3개를 마침표로 구분하여 표시합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 480px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bc01a06891f5321dd63bbe2df9f9a825/a2510/structure.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3lhQf//EABUQAQEAAAAAAAAAAAAAAAAAABEg/9oACAEBAAEFAiv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAACAwAAAAAAAAAAAAAAAAAQQQABcf/aAAgBAQABPyHVxlj/2gAMAwEAAgADAAAAEHvP/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Qp//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQACAwAAAAAAAAAAAAAAAAEAEBFRsf/aAAgBAQABPxARIDLt71//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"structure\"\n        title=\"structure\"\n        src=\"/static/bc01a06891f5321dd63bbe2df9f9a825/7cc5e/structure.jpg\"\n        srcset=\"/static/bc01a06891f5321dd63bbe2df9f9a825/e439a/structure.jpg 120w,\n/static/bc01a06891f5321dd63bbe2df9f9a825/09b79/structure.jpg 240w,\n/static/bc01a06891f5321dd63bbe2df9f9a825/7cc5e/structure.jpg 480w,\n/static/bc01a06891f5321dd63bbe2df9f9a825/80e3c/structure.jpg 720w,\n/static/bc01a06891f5321dd63bbe2df9f9a825/6a068/structure.jpg 960w,\n/static/bc01a06891f5321dd63bbe2df9f9a825/a2510/structure.jpg 1000w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">(이 그림에서 나타나는 정보로 알 수 있는 것은 encrypt 된 값이 plain 값일 때의 정보들을 계속 가지고 있다는 점입니다. 그렇다면 DB에 질의를 하지 않고, 지속적으로 데이터를 가지고 있을 수 있다는 점을 알 수 있습니다.)</code></p>\n<p>이제 그림의 3가지 값에 대해 알아봅시다.</p>\n<span style=\"color:red; word-break: break-all;\">\neyJ3eXBiOiJKV1QiDCJCgGciOiDIUcD1NiJ7\n</span>.<span style=\"color:purple; word-break: break-all;\">\ncyJ3c2KySWEiOiIiMVdmONZwZj0zNWRhLTE4ZjItODZhYk1jZWYzOTD0NjBvYmWidJ\n</span>.<span style=\"color:blue; word-break: break-all;\">\n-xN_h82PHVTCMA9vdoErcZxH-x5mb13y1f37t3rGzcM</span>\n<p><code class=\"language-text\">.</code> 으로 합하여 놓은 <code class=\"language-text\">Header</code> / <code class=\"language-text\">Claim (Payload)</code> / <code class=\"language-text\">Signature</code> 입니다. 이제 하나씩 알아봅시다.</p>\n<h2 id=\"Header\" style=\"position:relative;\">Header<a href=\"#Header\" aria-label=\"Header permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Header에는 JWT에 사용 된 해시 알고리즘과 토큰을 설명하는 간단한 JavaScript 객체의 인코딩 된\n문자열 표현입니다.</p>\n<h2 id=\"Claim-Payload\" style=\"position:relative;\">Claim (Payload)<a href=\"#Claim-Payload\" aria-label=\"Claim Payload permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>토큰의 핵심으로 데이터를 저장합니다. Payload 길이는 JWT에 저장하는 데이터의 양에 비례하기 때문에\n최소한의 데이터만 저장하길 권장합니다. (해시 값 자체는 길어지지만 Decrypt 하는 시간 또한 리소스입니다.)</p>\n<p>또한, Claim은 다시 <code class=\"language-text\">reserved</code> / <code class=\"language-text\">public</code> / <code class=\"language-text\">private</code> 으로 나뉩니다.</p>\n<h3 id=\"1-reserved-Claim\" style=\"position:relative;\">1) reserved Claim<a href=\"#1-reserved-Claim\" aria-label=\"1 reserved Claim permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>의무 사항은 아니지만 권장되는 (미리 정의 된) Claim 입니다.</p>\n<ul>\n<li>iss : 토큰 발급자</li>\n<li>exp : 만료 타임 스탬프 (초단위) (만료 된 토큰 거부)</li>\n<li>iat : JWT가 발행 된 시간. JWT의 나이를 결정하는 데 사용</li>\n<li>nbf : \"not before\"는 토큰이 활성화 될 미래의 시간</li>\n<li>jti : JWT의 고유 식별자. JWT가 재사용되거나 재생되는 것을 방지</li>\n<li>sub : 토큰의 대상 (드물게 사용됨)</li>\n<li>aud : 토큰의 대상 (거의 사용되지 않음)</li>\n</ul>\n<h3 id=\"2-public-Claim\" style=\"position:relative;\">2) public Claim<a href=\"#2-public-Claim\" aria-label=\"2 public Claim permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>자유롭게 정의할 수 있습니다. 그러나 (충돌 방지 네임 스페이스가 포함된) URI로 정의되어야 합니다.</p>\n<h3 id=\"3-private-Claim\" style=\"position:relative;\">3) private Claim<a href=\"#3-private-Claim\" aria-label=\"3 private Claim permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>사용자가 정의하는 Claim 입니다.</p>\n<hr>\n<p>Claim은 아래와 같이 사용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"sub\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1234567890\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"JunSeok Choi\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"admin\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"Signature\" style=\"position:relative;\">Signature<a href=\"#Signature\" aria-label=\"Signature permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Signature 에는 Header 와 Payload를 기반으로 생성한 서명값이 들어갑니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token constant\">HMACSHA256</span><span class=\"token punctuation\">(</span><span class=\"token function\">base64UrlEncode</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'.'</span> <span class=\"token operator\">+</span> <span class=\"token function\">base64UrlEncode</span><span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> secret<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1 id=\"2-Action\" style=\"position:relative;\">2. Action<a href=\"#2-Action\" aria-label=\"2 Action permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>jwt가 실제로 브라우저와 서버 사이에서는 아래와 같이 동작합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 480px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c88df6a1cfaa4b20772c8b7bdd9a4f90/b9962/diagram.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdyNoA//xAAYEAACAwAAAAAAAAAAAAAAAAACERIgIf/aAAgBAQABBQJaQyr/AP/EABYRAAMAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPwERf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAERACAycf/aAAgBAQAGPwJszRHK/wD/xAAaEAACAgMAAAAAAAAAAAAAAAABEQAgITFh/9oACAEBAAE/IQYzXIdUvA1T/9oADAMBAAIAAwAAABA0z//EABYRAQEBAAAAAAAAAAAAAAAAAAEREP/aAAgBAwEBPxBVTP/EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EKf/xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhQf/aAAgBAQABPxBEiN7eZpSTxhcIBrD3TQwAQJv/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"diagram\"\n        title=\"diagram\"\n        src=\"/static/c88df6a1cfaa4b20772c8b7bdd9a4f90/7cc5e/diagram.jpg\"\n        srcset=\"/static/c88df6a1cfaa4b20772c8b7bdd9a4f90/e439a/diagram.jpg 120w,\n/static/c88df6a1cfaa4b20772c8b7bdd9a4f90/09b79/diagram.jpg 240w,\n/static/c88df6a1cfaa4b20772c8b7bdd9a4f90/7cc5e/diagram.jpg 480w,\n/static/c88df6a1cfaa4b20772c8b7bdd9a4f90/80e3c/diagram.jpg 720w,\n/static/c88df6a1cfaa4b20772c8b7bdd9a4f90/6a068/diagram.jpg 960w,\n/static/c88df6a1cfaa4b20772c8b7bdd9a4f90/b9962/diagram.jpg 1334w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"1-사용자가-id-pw를-서버로-보내-로그인을-한다\" style=\"position:relative;\">1) 사용자가 id, pw를 서버로 보내 로그인을 한다.<a href=\"#1-%EC%82%AC%EC%9A%A9%EC%9E%90%EA%B0%80-id-pw%EB%A5%BC-%EC%84%9C%EB%B2%84%EB%A1%9C-%EB%B3%B4%EB%82%B4-%EB%A1%9C%EA%B7%B8%EC%9D%B8%EC%9D%84-%ED%95%9C%EB%8B%A4\" aria-label=\"1 사용자가 id pw를 서버로 보내 로그인을 한다 permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h3 id=\"2-서버에서-secret-키로-jwt-값을-만든다\" style=\"position:relative;\">2) 서버에서 secret 키로 jwt 값을 만든다.<a href=\"#2-%EC%84%9C%EB%B2%84%EC%97%90%EC%84%9C-secret-%ED%82%A4%EB%A1%9C-jwt-%EA%B0%92%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4\" aria-label=\"2 서버에서 secret 키로 jwt 값을 만든다 permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h3 id=\"3-브라우저로-jwt-값을-전송한다\" style=\"position:relative;\">3) 브라우저로 jwt 값을 전송한다.<a href=\"#3-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EB%A1%9C-jwt-%EA%B0%92%EC%9D%84-%EC%A0%84%EC%86%A1%ED%95%9C%EB%8B%A4\" aria-label=\"3 브라우저로 jwt 값을 전송한다 permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h3 id=\"4-브라우저에서-인증-헤더와-함께-jwt-값을-보낸다-보낼-때-다른-값도-같이-보낼겁니다\" style=\"position:relative;\">4) 브라우저에서 인증 헤더와 함께 jwt 값을 보낸다. (보낼 때 다른 값도 같이 보낼겁니다.)<a href=\"#4-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%97%90%EC%84%9C-%EC%9D%B8%EC%A6%9D-%ED%97%A4%EB%8D%94%EC%99%80-%ED%95%A8%EA%BB%98-jwt-%EA%B0%92%EC%9D%84-%EB%B3%B4%EB%82%B8%EB%8B%A4-%EB%B3%B4%EB%82%BC-%EB%95%8C-%EB%8B%A4%EB%A5%B8-%EA%B0%92%EB%8F%84-%EA%B0%99%EC%9D%B4-%EB%B3%B4%EB%82%BC%EA%B2%81%EB%8B%88%EB%8B%A4\" aria-label=\"4 브라우저에서 인증 헤더와 함께 jwt 값을 보낸다 보낼 때 다른 값도 같이 보낼겁니다 permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h3 id=\"5-서버에서-jwt-Signature-값을-체크하여-데이터를-조회한다\" style=\"position:relative;\">5) 서버에서 jwt Signature 값을 체크하여 데이터를 조회한다.<a href=\"#5-%EC%84%9C%EB%B2%84%EC%97%90%EC%84%9C-jwt-Signature-%EA%B0%92%EC%9D%84-%EC%B2%B4%ED%81%AC%ED%95%98%EC%97%AC-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EC%A1%B0%ED%9A%8C%ED%95%9C%EB%8B%A4\" aria-label=\"5 서버에서 jwt Signature 값을 체크하여 데이터를 조회한다 permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h3 id=\"6-결과를-브라우저로-보낸다\" style=\"position:relative;\">6) 결과를 브라우저로 보낸다.<a href=\"#6-%EA%B2%B0%EA%B3%BC%EB%A5%BC-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EB%A1%9C-%EB%B3%B4%EB%82%B8%EB%8B%A4\" aria-label=\"6 결과를 브라우저로 보낸다 permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<hr>\n<p>가장 고민했던 부분은 사실 토큰 탈취 시, 사용자 계정을 빼앗길지 아닐지에 대한 여부였습니다.\n사용자마자 secret 키 값이 다르면 토큰을 탈취당해도 개개인마다의 secret 키가 다르니\njwt 해시가 되지 않을 줄 알았으나, 개개인이 아닌 App 마다의 secert 키가 있는 구조여서\n기존 Session, Cookie를 사용할 때와 동일하게 토큰이 중요 이슈로 남아있게 되었습니다.</p>\n<p>하지만 서버에 있는 secert값을 유추하기 힘들기 때문에 (거의 불가능) 보안적인 측면에서\n안전할 것이라 여겨지며 기존 Session, Cookie 구조보다는 훨씬 가볍게 사용할 수 있을 것 같아\nSPA 프로젝트에서 유용할 것으로 보여집니다.</p>","frontmatter":{"title":"Would you mind using a JWT?","date":"August 09, 2017","tags":["jwt"]}}},"pageContext":{"slug":"/posts/jwt","previous":{"fields":{"slug":"/posts/dooray-bot-server"},"frontmatter":{"title":"Dooray bot scheduler (Server)"}},"next":{"fields":{"slug":"/posts/review-you-dont-know-js"},"frontmatter":{"title":"[Review] 중급자를 위한 You don't know JS"}}}}}