{"componentChunkName":"component---src-templates-post-template-tsx","path":"/posts/malware","result":{"data":{"site":{"siteMetadata":{"title":"June"}},"markdownRemark":{"id":"4adc8575-e638-5c69-aa87-f73446a46292","excerpt":"뜬금없지만 이번 7월 16일 부터 7월 1…","html":"<p>뜬금없지만 이번 7월 16일 부터 7월 19일까지 일본 여행을 가게 되었습니다. 물론 이미 잘 다녀온 여행이고 즐거웠습니다.\n그런데 여행 도중 갑자기 이용중인 서버 호스팅 사이트로부터 문자를 받게 되었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f72cd5dd07b5ec3741696bff941b6eea/d72d4/message.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAADBUlEQVR42oVUiU4iQRDl//9Bs1kVw4oigooHl9z3KWrWNR7AwAynKDMcQ229GofNJqvbSaV7qmteVXW/147VakVfmWmapOsGTSZvNJ3qNJvNxBaLhRj27VgMB/1nzOdz6vf71Gq1SVEUen19pdFozAkmNB6PBdQeAGXAFWdckGHA5rxeyoxv+HV9JvNyuWLwpawx6/pc4rCeTg1ez6wK4bi9/UWJRJZOTy/o8NBPsViaksksXV5GKJ8vy97VVYp9ObFoNEGFQpVSqTwFAkGOqVCn02fwBTmQsVSqUyh0RcfHZwIai6UE0OPxUTgUI78/QE6nSxIcHHjp4iJMxWKVQSucKMn/1/hIVOnGgbIrlYYEO50/KB5P08nJOe3vewX8/DxEbreHK/fxXka+kRhJUAgq3tj4Ro3GTz5PExXOqVa7oWAwKpnRCqrLZAp0dhaUClBxKpWjXK4krSMO3w8Pz3R//ySVPj62CFjSMkA2N7/T0dEJtx4ToHr9TiqFz+s95laPpEIk3tlxSaXNZpdb1eT8Xl66FiA41usN2dljWqhsmqw7HY00bUiqOqButy8zDD58t9vq2o95NJpYtLEJ+a/x1d5ncY6vVPKH2ANuqclVd7mSEQ0GQ1EOSA6q2KAfxP4sqzVDCfj57Q0AE5EfQAzDEDPNv7twQIuahgo6bArfVpMPuyP29NSiNvPLPicYzhB7rVZXDPHPzwonnFqAuOViscZUiJDLtU9bW7vCSdy2231I4XBcbhl7uH34fL5TplBZ9kB+0ExVhyxP0wIsl6/XKgA1EADl7O15hDogOyRpqwhyhPzS6TxFInGRngW4tJRSq92yXjMCEA7HhGvgGSpJso6hpEgkIf7r6zshdSBwua4eSXq9kQWICqvVhhAYBIcKwH4Aw/wMCrVEo8m11re3dwUQnG23NTl/RenJ2+iAoG9u7qVFtA554fXJZkssv6IcQblclz20CZ/VbkGUYl1mRy7r4/laCA3w3llvnfUG4lmDQfDww7CGz34b39/1teFCMH4DIEldvSA/dpUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"message\"\n        title=\"message\"\n        src=\"/static/f72cd5dd07b5ec3741696bff941b6eea/e85cb/message.png\"\n        srcset=\"/static/f72cd5dd07b5ec3741696bff941b6eea/070ae/message.png 120w,\n/static/f72cd5dd07b5ec3741696bff941b6eea/8ff5a/message.png 240w,\n/static/f72cd5dd07b5ec3741696bff941b6eea/e85cb/message.png 480w,\n/static/f72cd5dd07b5ec3741696bff941b6eea/d72d4/message.png 494w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">초과금 과금예정</code> 이란 단어에 스트레스가 쫘아악 올라가더군요;;;</p>\n<p>여행 도중이었기 때문에 바로 서버를 꺼주고 여행이 끝난 뒤 어떤 공격을 받은건지 확인을 했습니다.</p>\n<p>먼저 서버 호스팅의 트래픽 사용량과 로그를 확인해보았습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d8c90d87a4e7911a7a4f797619415e3c/077b7/traffic1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB5UlEQVR42m1T2Y7bQAzL/39aX/qyLYrdbuKcjpP4mvExhx1WlI9mixogMpY4lCg5m2S/x+l8xnaXCHZIkj2cD+AzPp8YxidGwb/PMI5g2IeI/J7hPWvxWURstuc73t53+Pb9Bz6PN5S2h48Datui7T3C8ERuPfZpjl/bE35+7JFcHujCU3IjyroRGJRtQN0FbM55i0NW4fSwSIsOaW5RNgEP0+Oam+m3cjjeDJK0wOlucBRcHgZF4yXvkJUNCuvU2eaa17jcCkgBFHL5Y3cQQQ/TD9gdr8hEtOwGXB8V0nupvLxu8Ts5odKuIraHFFlh4cT+xtoGBGcRBMZaxGEQjBp3zon1oHErCDEqmqbROUYZjzEi5rycRZAvBAWZrOpaxQLPVY2u79G6qJzaWI2TW8vchhde3zu9/0WQSRKZ+CsoHbowCxrl+RA0txQuilJ5k6DYICZiXDukbZ6/dmimDv0s+FJ47ZBzMvbFynyJojxPHUadp5W5Ma6CWvirk1WQ4AfMtVNkqUz7vfuP4DzDycm48nQprx3qlsUaBVmAcRbpXJy3PAk671fB1bJuWTrk+hciK1CQfzUKWp2tCPqo3RHDbJk8fjZ8N+oqLoItiMXK0mFUotXLtPzKc7PgYrntOv02KfoHCQrs/WkGz0YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"traffic1\"\n        title=\"traffic1\"\n        src=\"/static/d8c90d87a4e7911a7a4f797619415e3c/e85cb/traffic1.png\"\n        srcset=\"/static/d8c90d87a4e7911a7a4f797619415e3c/070ae/traffic1.png 120w,\n/static/d8c90d87a4e7911a7a4f797619415e3c/8ff5a/traffic1.png 240w,\n/static/d8c90d87a4e7911a7a4f797619415e3c/e85cb/traffic1.png 480w,\n/static/d8c90d87a4e7911a7a4f797619415e3c/37523/traffic1.png 720w,\n/static/d8c90d87a4e7911a7a4f797619415e3c/d9199/traffic1.png 960w,\n/static/d8c90d87a4e7911a7a4f797619415e3c/077b7/traffic1.png 1166w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/87431f4ff1322cfc3fe8667dda99f26d/b5cea/traffic2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.16666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACpUlEQVR42l1UO3ITQRAV3AEKEhPYRUAEJwASIKU4AVXERJBxAS7AKYg5hykbA/LasrQf7Uq7o93Z3+xHfrxu2eCiSl09Une/mXnvjSZVVaGua0i+GUVRYLlcwg8WWPgL+IxkFXPtI2dNesr/ZvI8x8RaiySOkRuDvuvgnEPHcG3LJtZWpQKYvMA66ZDGDoUZ/vZ0N/rlEJMwDLk7d91ssB0GBR26HsPQASU/ORCfA1UC5F2B1KUwncHYD+xjb99z3eucAgpYFEUo8g0ux1EbhsEB/Hw13/DEPcb79BPeVu9wp72LW+VtPG2fAwPQ9Q4jDzHqzIANDzWx+Y6rfENebA1rK3R1hyhL8Sx9gXv2PvbtPvaKPRxsHmLPPsBr8waX1Ra2LFCSsoYaFAQrhMPjxW/M5jNeO0CapphOTxFwfX4xw9qs4U09eN4Z0nWqv89mMxgZ5vUkDLkXQWS2LEtMfp0FVDJEGARaFAqE1yRJuGOhIHG0hMkMsjRDwL66qnX4OkRYVV0Ah75TlVqqVDeNZlFaGqJlpBFGu1jGS6XHlvbKajVzhaahbepagSdFYbFardQ2CqygjeaSV7IM2bmWEL8xS81JuBY5eU+zVm2jPpQd5YpC6HYYd7a5soIqeB39Loua6gRaazv28D1w05E1R0DaRjiRkBOKbcah/2cF0nG9HnXdq1clq7Va4LP5gg/tR3oINL/BxKQGMV+KXM01HXOl3LiWr6Z1tIU8zQZdK3Q41kWIaveS8h4HySO8LF8BDQELAs6SORaBr6DrtcHJyRTe6Tl5zeAvQvw4/on53GctIzUxjo5O6ICU1yuxpuqH8++4yObk21IUXvlwekYfLjh0gYxmlj+BMBQafPWc552qlYQWz/O0LgqX1U4keQRt1ep3Ee8PickSaT/rpx8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"traffic2\"\n        title=\"traffic2\"\n        src=\"/static/87431f4ff1322cfc3fe8667dda99f26d/e85cb/traffic2.png\"\n        srcset=\"/static/87431f4ff1322cfc3fe8667dda99f26d/070ae/traffic2.png 120w,\n/static/87431f4ff1322cfc3fe8667dda99f26d/8ff5a/traffic2.png 240w,\n/static/87431f4ff1322cfc3fe8667dda99f26d/e85cb/traffic2.png 480w,\n/static/87431f4ff1322cfc3fe8667dda99f26d/37523/traffic2.png 720w,\n/static/87431f4ff1322cfc3fe8667dda99f26d/d9199/traffic2.png 960w,\n/static/87431f4ff1322cfc3fe8667dda99f26d/b5cea/traffic2.png 1140w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/23795726d8a49d653e1797ccfd96a11e/0f246/traffic3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAcElEQVR42o2PbQuDMAyE+///5BjiZCpiR5NUYnpb+0HUifTgIS+E4+JmXuHFChMpKCpE+IcgxlgqMxdCCCCirTczpJQ28uxeg8ej7dG8JwxeQMt6OLrjrLxz3fjBsxsPhrg4rlEx/H85J7TqlHtUFV8SsjpHl3m77QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"traffic3\"\n        title=\"traffic3\"\n        src=\"/static/23795726d8a49d653e1797ccfd96a11e/e85cb/traffic3.png\"\n        srcset=\"/static/23795726d8a49d653e1797ccfd96a11e/070ae/traffic3.png 120w,\n/static/23795726d8a49d653e1797ccfd96a11e/8ff5a/traffic3.png 240w,\n/static/23795726d8a49d653e1797ccfd96a11e/e85cb/traffic3.png 480w,\n/static/23795726d8a49d653e1797ccfd96a11e/37523/traffic3.png 720w,\n/static/23795726d8a49d653e1797ccfd96a11e/d9199/traffic3.png 960w,\n/static/23795726d8a49d653e1797ccfd96a11e/0f246/traffic3.png 1118w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>... 눈물이 앞을 가립니다...</p>\n<p>...서버를 켜주고 (트래픽 차단을 해제하지 않아도 서버만 켜주면 사이트가 들어가지더군요...) coda 프로그램을 이용해 access.log 파일과 error.log 파일을 받았습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/167d8b3ce21b54fdd9d5a9f819b1e282/cd536/log1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 4.166666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAQElEQVR42h2KQQKAIAzD/IBMQcZE0P+/MrKdmrTdRI2kjVSVPF72UpFmiN2LL/Izw333dPdf8MrDOmcflPlF9wPTFhkGBYJx5gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"log1\"\n        title=\"log1\"\n        src=\"/static/167d8b3ce21b54fdd9d5a9f819b1e282/e85cb/log1.png\"\n        srcset=\"/static/167d8b3ce21b54fdd9d5a9f819b1e282/070ae/log1.png 120w,\n/static/167d8b3ce21b54fdd9d5a9f819b1e282/8ff5a/log1.png 240w,\n/static/167d8b3ce21b54fdd9d5a9f819b1e282/e85cb/log1.png 480w,\n/static/167d8b3ce21b54fdd9d5a9f819b1e282/37523/log1.png 720w,\n/static/167d8b3ce21b54fdd9d5a9f819b1e282/d9199/log1.png 960w,\n/static/167d8b3ce21b54fdd9d5a9f819b1e282/cd536/log1.png 1114w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c1f5ae9b83aca3685a142134781b891d/701e9/log2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.166666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAfElEQVR42iWNUQ6CMBBEiaCmiFYt0NpaVMDa2hDvf7rRXT/eJm+ymSmEPMKECJcy9PSEXz6wrwTlB3Y9B6jhBhsz+nFmt/GNk3VoVIt922G7axhxkCjo0NMlJPSPCde8wPz87DznVCq14dHuPjI0TkWbusZaCKzK8k9V4QuDRTOIkN0shgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"log2\"\n        title=\"log2\"\n        src=\"/static/c1f5ae9b83aca3685a142134781b891d/e85cb/log2.png\"\n        srcset=\"/static/c1f5ae9b83aca3685a142134781b891d/070ae/log2.png 120w,\n/static/c1f5ae9b83aca3685a142134781b891d/8ff5a/log2.png 240w,\n/static/c1f5ae9b83aca3685a142134781b891d/e85cb/log2.png 480w,\n/static/c1f5ae9b83aca3685a142134781b891d/37523/log2.png 720w,\n/static/c1f5ae9b83aca3685a142134781b891d/d9199/log2.png 960w,\n/static/c1f5ae9b83aca3685a142134781b891d/701e9/log2.png 1780w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6f0d27f841b18552400ebb4c9e9e1b5/a88f6/log3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 3.3333333333333335%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAP0lEQVR42i2LSQ4AIQzD5srWhcII/v/Q0CJOjizna2OC5o/MDF4biRhFFdXG2+aU6xKRs3sryKKIbzBc9KUbDp+qF4xdnyoaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"log3\"\n        title=\"log3\"\n        src=\"/static/a6f0d27f841b18552400ebb4c9e9e1b5/e85cb/log3.png\"\n        srcset=\"/static/a6f0d27f841b18552400ebb4c9e9e1b5/070ae/log3.png 120w,\n/static/a6f0d27f841b18552400ebb4c9e9e1b5/8ff5a/log3.png 240w,\n/static/a6f0d27f841b18552400ebb4c9e9e1b5/e85cb/log3.png 480w,\n/static/a6f0d27f841b18552400ebb4c9e9e1b5/37523/log3.png 720w,\n/static/a6f0d27f841b18552400ebb4c9e9e1b5/d9199/log3.png 960w,\n/static/a6f0d27f841b18552400ebb4c9e9e1b5/a88f6/log3.png 1900w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;x00_-gawa.sa.pilipinas.2015&quot;\n&quot;http://google.com/search?q=2+guys+1+horse&quot;\n&quot;/Ringing.at.your.dorbell!&quot;</code></pre></div>\n<p>위 사진에서 뿐만 아니라 많은 로그들이 있었으나, 3개의 문장들이 많은 반복이 있었으므로 3개의 문장들을 기준으로 구글링을 해봤습니다.</p>\n<p><a href=\"http://www.skepticism.us/2015/05/13/\" target=\"_blank\" rel=\"noopener\">shellshock attack</a> 라는 malware였습니다. (해결 방법까지 제공!)</p>\n<p>ps. 현재 사이트를 운영중인게 아니라 큰 조치를 취할 필요는 없었습니다.\nphpschool 호스팅을 쓰면서 무료로 제공하는 Dnszi에서, 유료면서 동일 IP에 대한 반복적인 리퀘스트를 제한해준다고 추천받은 Dnsever로 (유료지만..ㅠㅠ)\nDNS를 옮기는게 제가 취한 조치였습니다.</p>\n<hr>\n<p>여행 도중이란 상황에 많이 당황하고, 아무것도 없는 빈 사이트, 서버에 이런 공격이 오리라곤 생각도 못하고 있었기에 두번 세번 당황했습니다.</p>\n<p>일이 터지기 전에 미리 조심해야 함을 다시 깨닫게 되는 여행이었고, 빈 사이트가 오히려 더 위험하다는걸 깨닫게 되었습니다.</p>","frontmatter":{"title":"여행중인 나를 당황하게 한 멀웨어 공격","date":"July 20, 2015","tags":["malware"]}}},"pageContext":{"slug":"/posts/malware","previous":{"fields":{"slug":"/posts/php-fastcgi"},"frontmatter":{"title":"Fast CGI => php5-fpm.sock 오류 해결하기"}},"next":{"fields":{"slug":"/posts/browserify"},"frontmatter":{"title":"Browserify와 Watchify"}}}},"staticQueryHashes":["1576648375","1963346411"]}